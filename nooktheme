#!/bin/bash

# Para ASCII Art and Header
echo -e "\n\033[1;36m"
cat << "EOF"
================================================                    
            mmmmmm    mmmmm     mmm  mmm 
            ##""""##  ##"""##    ##mm##  
            ##    ##  ##    ##    ####   
            #######   ##    ##     ##    
            ##  "##m  ##    ##    ####   
            ##    ##  ##mmm##    ##  ##  
            ""    """ """""     """  """ 
                   POWERED BY RDX             
================================================

 🤍 NookTheme Installer - github.com/ParaNoob123

EOF
echo -e "\033[0m"

echo -e "\033[1;34mStarting Installation of Blueprint.zip\033[0m"
echo "-------------------------------------"

# Installation Steps
commands=(
  "apt update"
  "cd /var/www/pterodactyl"
  "php artisan down"
  "curl -L https://github.com/Nookure/NookTheme/releases/latest/download/panel.tar.gz | tar -xzv"
  "chmod -R 755 storage/* bootstrap/cache"
  "composer install --no-dev --optimize-autoloader"
  "php artisan view:clear"
  "php artisan config:clear"
  "php artisan migrate --seed --force"
  "chown -R www-data:www-data /var/www/pterodactyl/*"
  "php artisan queue:restart"
  "php artisan up"
)

# Execute commands with progress
for i in "${!commands[@]}"; do
  echo -e "\033[1;33m[$((i+1))/14] Executing:\033[0m \033[0;35m${commands[$i]}\033[0m"
  eval "${commands[$i]}"
  if [ $? -ne 0 ]; then
    echo -e "\033[1;31mError occurred at step $((i+1)). Aborting installation.\033[0m"
    exit 1
  fi
done

# Completion Message
echo -e "\n\033[1;32m-------------------------------------\033[0m"
echo -e "\033[1;32m Nook Theme installed successfully! 🎉\033[0m"
echo -e "\033[1;35m           Made by Para\033[0m"
echo -e "\033[1;35m       github.com/Para\033[0m"
echo -e "\033[1;32m-------------------------------------\033[0m"
